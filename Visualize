from r3e_api import R3ESharedMemory
import time

# Initialize shared memory
shared_memory = R3ESharedMemory()
shared_memory.update_offsets()

while True:
    try:
        data = shared_memory.get_value('Player')
        if data is None:
            print("Failed to retrieve data. Data is None.")
        else:
            print(f"Retrieved data: {data}")
            # Check if the data is a dictionary and contains the 'Speed' key
            if isinstance(data, dict):
                if 'Speed' in data:
                    speed = data['Speed']
                    print(f"Speed: {speed}")
                else:
                    print("The 'Speed' key is not found in the data.")
            else:
                print(f"Unexpected data type: {type(data)}. Data: {data}")

    except TypeError as e:
        print(f"TypeError: {e}")
    except KeyError as e:
        print(f"KeyError: {e}")
    except Exception as e:
        print(f"Unexpected error: {e}")

    time.sleep(0.5)
