from r3e_api import r3esharedmemory
import time

# Initialize shared memory
shared_memory = r3esharedmemory()
shared_memory.update_offsets()

while True:
    try:
        data = shared_memory.get_value('Player')
        if data is None:
            print("Failed to retrieve data. Data is None.")
        else:
            # Print detailed information about the data
            print(f"Data type: {type(data)}")
            print(f"Data content: {data}")

            # If data is a dictionary, print keys and types
            if isinstance(data, dict):
                for key, value in data.items():
                    print(f"Key: {key}, Value: {value}, Type: {type(value)}")
                
                # Attempt to access specific keys
                if 'Speed' in data:
                    speed = data['Speed']
                    print(f"Speed: {speed}")
                else:
                    print("'Speed' key not found in the data.")
            else:
                print(f"Unexpected data type: {type(data)}. Data: {data}")

    except TypeError as e:
        print(f"TypeError: {e}")
    except KeyError as e:
        print(f"KeyError: {e}")
    except Exception as e:
        print(f"Unexpected error: {e}")

    time.sleep(0.5)
